{
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_changeset[template_invalid_cfn_schema]": {
    "recorded-date": "25-04-2023, 13:54:20",
    "recorded-content": {
      "create_change_set_exc": {
        "args": [
          "Parameter validation failed:\nInvalid length for parameter TemplateBody, value: 0, valid min length: 1"
        ],
        "kwargs": {
          "report": "Invalid length for parameter TemplateBody, value: 0, valid min length: 1"
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_stack[template_invalid_cfn_schema]": {
    "recorded-date": "25-04-2023, 13:54:20",
    "recorded-content": {
      "create_stack_exc": {
        "args": [
          "Parameter validation failed:\nInvalid length for parameter TemplateBody, value: 0, valid min length: 1"
        ],
        "kwargs": {
          "report": "Invalid length for parameter TemplateBody, value: 0, valid min length: 1"
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_changeset[template_invalid_yaml_syntax]": {
    "recorded-date": "25-04-2023, 13:54:20",
    "recorded-content": {
      "create_change_set_exc": {
        "Error": {
          "Code": "ValidationError",
          "Message": "Template format error: YAML not well-formed. (line 3, column 1)",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_stack[template_invalid_yaml_syntax]": {
    "recorded-date": "25-04-2023, 13:54:20",
    "recorded-content": {
      "create_stack_exc": {
        "Error": {
          "Code": "ValidationError",
          "Message": "Template format error: YAML not well-formed. (line 3, column 1)",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_stack[resolve_ssm_parameter_as_stack_parameter_does_not_exist]": {
    "recorded-date": "25-04-2023, 13:54:20",
    "recorded-content": {
      "create_stack_exc": {
        "Error": {
          "Code": "ValidationError",
          "Message": "Unable to fetch parameters [ssm-parameter-does-not-exist] from parameter store for this account.",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_changeset[resolve_ssm_parameter_as_stack_parameter_does_not_exist]": {
    "recorded-date": "25-04-2023, 13:54:20",
    "recorded-content": {
      "create_change_set_exc": {
        "Error": {
          "Code": "ValidationError",
          "Message": "Unable to fetch parameters [ssm-parameter-does-not-exist] from parameter store for this account.",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_stack[missing_required_parameter]": {
    "recorded-date": "25-04-2023, 14:21:21",
    "recorded-content": {
      "postcreate_original_template": {
        "StagesAvailable": [
          "Original",
          "Processed"
        ],
        "TemplateBody": "Resources:\n  Table:\n    Type: AWS::DynamoDB::Table\n    Properties:\n      TableName: incomplete-table-description\n      # No key schema or attribute definitions\n",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "postcreate_processed_template": {
        "StagesAvailable": [
          "Original",
          "Processed"
        ],
        "TemplateBody": "Resources:\n  Table:\n    Type: AWS::DynamoDB::Table\n    Properties:\n      TableName: incomplete-table-description\n      # No key schema or attribute definitions\n",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe_stack": {
        "Stacks": [
          {
            "CreationTime": "datetime",
            "DeletionTime": "datetime",
            "DisableRollback": false,
            "DriftInformation": {
              "StackDriftStatus": "NOT_CHECKED"
            },
            "EnableTerminationProtection": false,
            "NotificationARNs": [],
            "RollbackConfiguration": {},
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-62dacddb/ff4c4df0-e36b-11ed-b08f-0a01e99f7e86",
            "StackName": "cfnv2-test-stack-62dacddb",
            "StackStatus": "ROLLBACK_COMPLETE",
            "Tags": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_changeset[missing_required_parameter]": {
    "recorded-date": "25-04-2023, 14:20:50",
    "recorded-content": {
      "describe_stack": {
        "Stacks": [
          {
            "CreationTime": "datetime",
            "DisableRollback": false,
            "DriftInformation": {
              "StackDriftStatus": "NOT_CHECKED"
            },
            "EnableTerminationProtection": false,
            "NotificationARNs": [],
            "RollbackConfiguration": {},
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3c7346b8/da75c330-e36b-11ed-967f-0a7a322278dc",
            "StackName": "cfnv2-test-stack-3c7346b8",
            "StackStatus": "REVIEW_IN_PROGRESS",
            "StackStatusReason": "User Initiated",
            "Tags": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe_changeset_byarnalone": {
        "Capabilities": [],
        "ChangeSetId": "arn:aws:cloudformation:<region>:111111111111:changeSet/cfnv2-test-changeset-48a86b70/dd0a586b-f56e-41e9-a585-3021e3246726",
        "ChangeSetName": "cfnv2-test-changeset-48a86b70",
        "Changes": [],
        "CreationTime": "datetime",
        "ExecutionStatus": "UNAVAILABLE",
        "IncludeNestedStacks": false,
        "NotificationARNs": [],
        "RollbackConfiguration": {},
        "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3c7346b8/da75c330-e36b-11ed-967f-0a7a322278dc",
        "StackName": "cfnv2-test-stack-3c7346b8",
        "Status": "CREATE_PENDING",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe_changeset_bynames_postwait": {
        "Capabilities": [],
        "ChangeSetId": "arn:aws:cloudformation:<region>:111111111111:changeSet/cfnv2-test-changeset-48a86b70/dd0a586b-f56e-41e9-a585-3021e3246726",
        "ChangeSetName": "cfnv2-test-changeset-48a86b70",
        "Changes": [
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "Table",
              "ResourceType": "AWS::DynamoDB::Table",
              "Scope": []
            },
            "Type": "Resource"
          }
        ],
        "CreationTime": "datetime",
        "ExecutionStatus": "AVAILABLE",
        "IncludeNestedStacks": false,
        "NotificationARNs": [],
        "RollbackConfiguration": {},
        "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3c7346b8/da75c330-e36b-11ed-967f-0a7a322278dc",
        "StackName": "cfnv2-test-stack-3c7346b8",
        "Status": "CREATE_COMPLETE",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe_stack_postexecute": {
        "Stacks": [
          {
            "CreationTime": "datetime",
            "DeletionTime": "datetime",
            "DisableRollback": false,
            "DriftInformation": {
              "StackDriftStatus": "NOT_CHECKED"
            },
            "EnableTerminationProtection": false,
            "LastUpdatedTime": "datetime",
            "NotificationARNs": [],
            "RollbackConfiguration": {},
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3c7346b8/da75c330-e36b-11ed-967f-0a7a322278dc",
            "StackName": "cfnv2-test-stack-3c7346b8",
            "StackStatus": "ROLLBACK_COMPLETE",
            "Tags": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "execute_change_set_exc": {
        "Error": {
          "Code": "ChangeSetNotFound",
          "Message": "ChangeSet [cfnv2-test-changeset-48a86b70] does not exist",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 404
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_stack[resolve_ssm_parameter_as_stack_parameter_permission_denied]": {
    "recorded-date": "25-04-2023, 15:16:34",
    "recorded-content": {
      "create_stack_exc": {
        "Error": {
          "Code": "ValidationError",
          "Message": "AccessDenied. User doesn't have permission to call ssm:GetParameters",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_changeset[resolve_ssm_parameter_as_stack_parameter_permission_denied]": {
    "recorded-date": "25-04-2023, 15:16:57",
    "recorded-content": {
      "create_change_set_exc": {
        "Error": {
          "Code": "ValidationError",
          "Message": "AccessDenied. User doesn't have permission to call ssm:GetParameters",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 400
        }
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_stack[create_resource_permission_denied]": {
    "recorded-date": "25-04-2023, 15:31:58",
    "recorded-content": {
      "postcreate_original_template": {
        "StagesAvailable": [
          "Original",
          "Processed"
        ],
        "TemplateBody": "Parameters:\n  TopicName:\n    Type: String\nResources:\n  Topic:\n    Type: AWS::SNS::Topic\n    Properties:\n      TopicName: !Ref TopicName",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "postcreate_processed_template": {
        "StagesAvailable": [
          "Original",
          "Processed"
        ],
        "TemplateBody": "Parameters:\n  TopicName:\n    Type: String\nResources:\n  Topic:\n    Type: AWS::SNS::Topic\n    Properties:\n      TopicName: !Ref TopicName",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe_stack": {
        "Stacks": [
          {
            "CreationTime": "datetime",
            "DeletionTime": "datetime",
            "DisableRollback": false,
            "DriftInformation": {
              "StackDriftStatus": "NOT_CHECKED"
            },
            "EnableTerminationProtection": false,
            "NotificationARNs": [],
            "Parameters": [
              {
                "ParameterKey": "TopicName",
                "ParameterValue": "topic-c11db1c1"
              }
            ],
            "RoleARN": "arn:aws:iam::111111111111:role/role-da44fde5",
            "RollbackConfiguration": {},
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "StackName": "cfnv2-test-stack-dc6a9abc",
            "StackStatus": "ROLLBACK_COMPLETE",
            "Tags": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "stack_events": {
        "StackEvents": [
          {
            "EventId": "<uuid:1>",
            "LogicalResourceId": "cfnv2-test-stack-dc6a9abc",
            "PhysicalResourceId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "ResourceStatus": "ROLLBACK_COMPLETE",
            "ResourceType": "AWS::CloudFormation::Stack",
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "StackName": "cfnv2-test-stack-dc6a9abc",
            "Timestamp": "timestamp"
          },
          {
            "EventId": "Topic-DELETE_COMPLETE-date",
            "LogicalResourceId": "Topic",
            "PhysicalResourceId": "",
            "ResourceProperties": {
              "TopicName": "topic-c11db1c1"
            },
            "ResourceStatus": "DELETE_COMPLETE",
            "ResourceType": "AWS::SNS::Topic",
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "StackName": "cfnv2-test-stack-dc6a9abc",
            "Timestamp": "timestamp"
          },
          {
            "EventId": "<uuid:2>",
            "LogicalResourceId": "cfnv2-test-stack-dc6a9abc",
            "PhysicalResourceId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "ResourceStatus": "ROLLBACK_IN_PROGRESS",
            "ResourceStatusReason": "The following resource(s) failed to create: [Topic]. Rollback requested by user.",
            "ResourceType": "AWS::CloudFormation::Stack",
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "StackName": "cfnv2-test-stack-dc6a9abc",
            "Timestamp": "timestamp"
          },
          {
            "EventId": "Topic-CREATE_FAILED-date",
            "LogicalResourceId": "Topic",
            "PhysicalResourceId": "",
            "ResourceProperties": {
              "TopicName": "topic-c11db1c1"
            },
            "ResourceStatus": "CREATE_FAILED",
            "ResourceStatusReason": "Resource handler returned message: \"User: arn:aws:sts::111111111111:assumed-role/role-da44fde5/AWSCloudFormation is not authorized to perform: SNS:GetTopicAttributes on resource: arn:aws:sns:<region>:111111111111:topic-c11db1c1 with an explicit deny in an identity-based policy (Service: Sns, Status Code: 403, Request ID: f69f3c24-e481-53c5-8ecf-60e5028a2973)\" (RequestToken: 7c693abe-9e09-bf2d-9881-54a4fbb6e8dd, HandlerErrorCode: AccessDenied)",
            "ResourceType": "AWS::SNS::Topic",
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "StackName": "cfnv2-test-stack-dc6a9abc",
            "Timestamp": "timestamp"
          },
          {
            "EventId": "Topic-CREATE_IN_PROGRESS-date",
            "LogicalResourceId": "Topic",
            "PhysicalResourceId": "",
            "ResourceProperties": {
              "TopicName": "topic-c11db1c1"
            },
            "ResourceStatus": "CREATE_IN_PROGRESS",
            "ResourceType": "AWS::SNS::Topic",
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "StackName": "cfnv2-test-stack-dc6a9abc",
            "Timestamp": "timestamp"
          },
          {
            "EventId": "<uuid:3>",
            "LogicalResourceId": "cfnv2-test-stack-dc6a9abc",
            "PhysicalResourceId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "ResourceStatus": "CREATE_IN_PROGRESS",
            "ResourceStatusReason": "User Initiated",
            "ResourceType": "AWS::CloudFormation::Stack",
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-dc6a9abc/94730c80-e375-11ed-be40-02e8bde86428",
            "StackName": "cfnv2-test-stack-dc6a9abc",
            "Timestamp": "timestamp"
          }
        ]
      }
    }
  },
  "tests/integration/cloudformation/nextgen/test_api_3.py::test_skeleton_changeset[create_resource_permission_denied]": {
    "recorded-date": "25-04-2023, 15:36:21",
    "recorded-content": {
      "describe_stack": {
        "Stacks": [
          {
            "CreationTime": "datetime",
            "DisableRollback": false,
            "DriftInformation": {
              "StackDriftStatus": "NOT_CHECKED"
            },
            "EnableTerminationProtection": false,
            "NotificationARNs": [],
            "RoleARN": "arn:aws:iam::111111111111:role/role-64873dc4",
            "RollbackConfiguration": {},
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3db36a83/0cea6f50-e376-11ed-93d4-0a5c3391ce88",
            "StackName": "cfnv2-test-stack-3db36a83",
            "StackStatus": "REVIEW_IN_PROGRESS",
            "StackStatusReason": "User Initiated",
            "Tags": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "stack_events": {
        "StackEvents": [
          {
            "EventId": "<uuid:1>",
            "LogicalResourceId": "cfnv2-test-stack-3db36a83",
            "PhysicalResourceId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3db36a83/0cea6f50-e376-11ed-93d4-0a5c3391ce88",
            "ResourceStatus": "REVIEW_IN_PROGRESS",
            "ResourceStatusReason": "User Initiated",
            "ResourceType": "AWS::CloudFormation::Stack",
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3db36a83/0cea6f50-e376-11ed-93d4-0a5c3391ce88",
            "StackName": "cfnv2-test-stack-3db36a83",
            "Timestamp": "timestamp"
          }
        ]
      },
      "describe_changeset_byarnalone": {
        "Capabilities": [],
        "ChangeSetId": "arn:aws:cloudformation:<region>:111111111111:changeSet/cfnv2-test-changeset-ea09a0ad/d4560e48-3eea-42d0-aee2-55f33f11034b",
        "ChangeSetName": "cfnv2-test-changeset-ea09a0ad",
        "Changes": [],
        "CreationTime": "datetime",
        "ExecutionStatus": "UNAVAILABLE",
        "IncludeNestedStacks": false,
        "NotificationARNs": [],
        "Parameters": [
          {
            "ParameterKey": "TopicName",
            "ParameterValue": "topic-f9524fcc"
          }
        ],
        "RollbackConfiguration": {},
        "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3db36a83/0cea6f50-e376-11ed-93d4-0a5c3391ce88",
        "StackName": "cfnv2-test-stack-3db36a83",
        "Status": "CREATE_PENDING",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe_changeset_bynames_postwait": {
        "Capabilities": [],
        "ChangeSetId": "arn:aws:cloudformation:<region>:111111111111:changeSet/cfnv2-test-changeset-ea09a0ad/d4560e48-3eea-42d0-aee2-55f33f11034b",
        "ChangeSetName": "cfnv2-test-changeset-ea09a0ad",
        "Changes": [
          {
            "ResourceChange": {
              "Action": "Add",
              "Details": [],
              "LogicalResourceId": "Topic",
              "ResourceType": "AWS::SNS::Topic",
              "Scope": []
            },
            "Type": "Resource"
          }
        ],
        "CreationTime": "datetime",
        "ExecutionStatus": "AVAILABLE",
        "IncludeNestedStacks": false,
        "NotificationARNs": [],
        "Parameters": [
          {
            "ParameterKey": "TopicName",
            "ParameterValue": "topic-f9524fcc"
          }
        ],
        "RollbackConfiguration": {},
        "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3db36a83/0cea6f50-e376-11ed-93d4-0a5c3391ce88",
        "StackName": "cfnv2-test-stack-3db36a83",
        "Status": "CREATE_COMPLETE",
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "describe_stack_postexecute": {
        "Stacks": [
          {
            "CreationTime": "datetime",
            "DeletionTime": "datetime",
            "DisableRollback": false,
            "DriftInformation": {
              "StackDriftStatus": "NOT_CHECKED"
            },
            "EnableTerminationProtection": false,
            "LastUpdatedTime": "datetime",
            "NotificationARNs": [],
            "Parameters": [
              {
                "ParameterKey": "TopicName",
                "ParameterValue": "topic-f9524fcc"
              }
            ],
            "RoleARN": "arn:aws:iam::111111111111:role/role-64873dc4",
            "RollbackConfiguration": {},
            "StackId": "arn:aws:cloudformation:<region>:111111111111:stack/cfnv2-test-stack-3db36a83/0cea6f50-e376-11ed-93d4-0a5c3391ce88",
            "StackName": "cfnv2-test-stack-3db36a83",
            "StackStatus": "ROLLBACK_COMPLETE",
            "Tags": []
          }
        ],
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 200
        }
      },
      "execute_change_set_exc": {
        "Error": {
          "Code": "ChangeSetNotFound",
          "Message": "ChangeSet [cfnv2-test-changeset-ea09a0ad] does not exist",
          "Type": "Sender"
        },
        "ResponseMetadata": {
          "HTTPHeaders": {},
          "HTTPStatusCode": 404
        }
      }
    }
  }
}
